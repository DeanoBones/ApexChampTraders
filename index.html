<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ACT FAST Balance Overview</title>
  <style>
    body {
      background: #000;
      color: #ff6f00; /* neon orange */
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      margin-bottom: 1.5rem;
      text-shadow: 0 0 10px #ff6f00;
    }
    .balance {
      font-size: 1.3rem;
      margin: 1rem auto;
      padding: 1rem;
      border: 1px solid #ff6f00;
      border-radius: 8px;
      box-shadow: 0 0 10px #ff6f00;
      max-width: 360px;
    }
    .label {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

  <h1>ACT FAST Balance Overview</h1>

  <div class="balance">
    <div class="label">FAST Wallet (Spot + Perp):</div>
    <div id="fastBalance">Loading...</div>
  </div>

  <div class="balance">
    <div class="label">Vault Wallet (Perp only):</div>
    <div id="vaultPerpBalance">Loading...</div>
  </div>

  <div class="balance" style="font-weight: bold; font-size: 1.5rem;">
    Total Combined Balance: <span id="totalBalance">Loading...</span>
  </div>

  <script>
    const FAST_WALLET = "0x17a515540CBa017A1d82b68bf68b4410CB301732";
    const VAULT_WALLET = "0x92b2a18ed4b0b113cc8aa11ff23881e5aeb88cb1";

    async function fetchSpotBalance(address) {
      try {
        const res = await fetch("https://api.hyperliquid.xyz/info", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ type: "spotClearinghouseState", user: address })
        });
        const data = await res.json();
        if (data.balances) {
          return data.balances.reduce((sum, b) => sum + parseFloat(b.total), 0);
        }
        return 0;
      } catch (e) {
        console.error("Spot fetch error:", e);
        return 0;
      }
    }

    async function fetchPerpBalance(address, dex = "") {
      try {
        const res = await fetch("https://api.hyperliquid.xyz/info", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ type: "clearinghouseState", user: address, dex: dex })
        });
        const data = await res.json();
        if (data.marginSummary && data.marginSummary.accountValue) {
          return parseFloat(data.marginSummary.accountValue);
        }
        return 0;
      } catch (e) {
        console.error("Perp fetch error:", e);
        return 0;
      }
    }

    async function fetchBalances() {
      document.getElementById('fastBalance').textContent = "Loading...";
      document.getElementById('vaultPerpBalance').textContent = "Loading...";
      document.getElementById('totalBalance').textContent = "Loading...";

      const [fastSpot, fastPerp, vaultPerp] = await Promise.all([
        fetchSpotBalance(FAST_WALLET),
        fetchPerpBalance(FAST_WALLET),
        fetchPerpBalance(VAULT_WALLET),
      ]);

      const fastTotal = fastSpot + fastPerp;
      const total = fastTotal + vaultPerp;

      document.getElementById('fastBalance').textContent = fastTotal.toFixed(4);
      document.getElementById('vaultPerpBalance').textContent = vaultPerp.toFixed(4);
      document.getElementById('totalBalance').textContent = total.toFixed(4);
    }

    fetchBalances();
  </script>

</body>
</html>
