<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ACT FAST Full Balance</title>
  <style>
    body {
      background: #000;
      color: #ff6f00; /* neon orange */
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 2rem;
    }
    h1 {
      margin-bottom: 1.5rem;
      text-shadow: 0 0 10px #ff6f00;
    }
    .balance {
      font-size: 1.2rem;
      margin: 1rem 0;
      padding: 1rem;
      border: 1px solid #ff6f00;
      border-radius: 8px;
      box-shadow: 0 0 10px #ff6f00;
      max-width: 360px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }
    .label {
      font-weight: bold;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

  <h1>ACT FAST Full Balance</h1>

  <div class="balance">
    <div class="label">Vault Balance (vault wallet):</div>
    <div id="vault">Loading...</div>
  </div>

  <div class="balance">
    <div class="label">Spot Balances:</div>
    <div>FAST wallet: <span id="spotFast">Loading...</span></div>
    <div>Vault wallet: <span id="spotVault">Loading...</span></div>
  </div>

  <div class="balance">
    <div class="label">Perp Balances:</div>
    <div>FAST wallet: <span id="perpFast">Loading...</span></div>
    <div>Vault wallet: <span id="perpVault">Loading...</span></div>
  </div>

  <div class="balance" style="font-weight: bold; font-size: 1.5rem; text-align: center;">
    Total Balance: <span id="total">Loading...</span>
  </div>

  <script>
    const FAST_WALLET = "0x17a515540CBa017A1d82b68bf68b4410CB301732";   // spot & perp
    const VAULT_WALLET = "0x92b2a18ed4b0b113cc8aa11ff23881e5aeb88cb1"; // vault, spot & perp

    async function fetchVaultBalance(address) {
      try {
        const res = await fetch("https://api.hyperliquid.xyz/info", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ type: "vaultState", user: address })
        });
        const data = await res.json();
        if (data.vaults && data.vaults.length > 0) {
          return data.vaults.reduce((sum, v) => sum + parseFloat(v.valueUSD), 0);
        }
        return 0;
      } catch (e) {
        console.error("Vault fetch error:", e);
        return 0;
      }
    }

    async function fetchSpotBalance(address) {
      try {
        const res = await fetch("https://api.hyperliquid.xyz/info", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ type: "spotClearinghouseState", user: address })
        });
        const data = await res.json();
        if (data.balances) {
          return data.balances.reduce((sum, b) => sum + parseFloat(b.total), 0);
        }
        return 0;
      } catch (e) {
        console.error("Spot fetch error:", e);
        return 0;
      }
    }

    async function fetchPerpBalance(address, dex = "") {
      try {
        const res = await fetch("https://api.hyperliquid.xyz/info", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ type: "clearinghouseState", user: address, dex: dex })
        });
        const data = await res.json();
        if (data.marginSummary && data.marginSummary.accountValue) {
          return parseFloat(data.marginSummary.accountValue);
        }
        return 0;
      } catch (e) {
        console.error("Perp fetch error:", e);
        return 0;
      }
    }

    async function fetchAllBalances() {
      // Show loading text
      document.getElementById('vault').textContent = "Loading...";
      document.getElementById('spotFast').textContent = "Loading...";
      document.getElementById('spotVault').textContent = "Loading...";
      document.getElementById('perpFast').textContent = "Loading...";
      document.getElementById('perpVault').textContent = "Loading...";
      document.getElementById('total').textContent = "Loading...";

      // Fetch balances
      const vault = await fetchVaultBalance(VAULT_WALLET);

      const spotFast = await fetchSpotBalance(FAST_WALLET);
      const spotVault = await fetchSpotBalance(VAULT_WALLET);

      const perpFast = await fetchPerpBalance(FAST_WALLET);
      const perpVault = await fetchPerpBalance(VAULT_WALLET);

      // Calculate total sum
      const total = vault + spotFast + spotVault + perpFast + perpVault;

      // Update UI
      document.getElementById('vault').textContent = vault.toFixed(4);
      document.getElementById('spotFast').textContent = spotFast.toFixed(4);
      document.getElementById('spotVault').textContent = spotVault.toFixed(4);
      document.getElementById('perpFast').textContent = perpFast.toFixed(4);
      document.getElementById('perpVault').textContent = perpVault.toFixed(4);
      document.getElementById('total').textContent = total.toFixed(4);
    }

    fetchAllBalances();
  </script>
</body>
</html>
